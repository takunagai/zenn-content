---
title: "コミットを整理し GitHub に反映済みのコミットに反映する方法"
emoji: "🐸"
type: "tech"
topics: ["git","github"]
published: false
---

「GitHubにプッシュしてしまったコミットを破棄したい。」
そんな時の手順説明です。

## まずは注意点

- **正しい手順を踏まないと、意図せぬ変更が発生する可能性があります。必要に応じてバックアップを取ってから操作を行ってください。**
- **共同開発でリセットやリベースを行い、リモートリポジトリへの強制プッシュを行う際は特に慎重に操作してください。他の開発者の作業に影響を与える可能性があるため、実行前にしっかりとコミュニケーションを取ることが重要です。**

## 1. **最新のコミットのみを破棄したい場合**

ローカルの最新コミットを破棄し、その状態をリモートに強制的にプッシュします。

```bash
git reset --hard HEAD^
git push -f origin <branch-name>
```

## 3. **任意のコミットを選んで破棄したい場合**

複数のコミットをインタラクティブなリベースで編集できます。
以下のコマンドは、"最新〜4個"のコミットを編集します(途中でインタラクティブなリベース)

```bash
git rebase -i HEAD~4
```

このコマンドでインタラクティブなリベースが開始、コミットを破棄したい場合はコミット行の前に `drop`(`d` でも可)と入力することで、そのコミットを削除するという設定ができます。編集後にエディタを保存しウインドウを閉じると、コミットに設定が反映されます。

Github上のリポジトリに反映させるため、リモートの main ブランチに強制的にプッシュします。

```bash
git push -f origin main
```

## あとがき

コミットをいじるの、慣れてないと不安いっぱいなんですよね。
特に共同開発だと緊張感が半端ありません。
普段からコミットを綺麗に整理するクセをつけ慣れておきたいものです。
